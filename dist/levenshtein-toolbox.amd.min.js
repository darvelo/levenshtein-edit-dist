define("levenshtein-toolbox",["exports","module"],function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=0,r=1,o=2,h=function(){function t(e){return i(this,t),e="object"==typeof e?e:{},this instanceof t?(this.caseSensitive=!!e.caseSensitive,this.m=[],void this.set("type",e.type)):new t(e)}return n(t,[{key:"_initFirstRowWhole",value:function(){var t,e=this.m,i=e[0].length,n=this._s1,s=this._s2,o=null,h=n[1];for(t=0;i>t;++t)t>0?(e[0][t].cost=e[0][t-1].cost+this.insertCost(s[t],o,h),e[0][t].parent=r):(e[0][t].cost=0,e[0][t].parent=-1)}},{key:"_initFirstRowSubstring",value:function(){var t,e=this.m,i=e[0].length;for(t=0;i>t;++t)e[0][t].cost=0,e[0][t].parent=-1}},{key:"_initFirstRow",value:function(){this.m.length&&("whole"===this.type?this._initFirstRowWhole():"substring"===this.type&&this._initFirstRowSubstring())}},{key:"_initFirstColumn",value:function(){var t,e=this.m,i=e.length,n=this._s1;for(t=0;i>t;++t)t>0?(e[t][0].cost=e[t-1][0].cost+this.deleteCost(n[t]),e[t][0].parent=o):(e[t][0].cost=0,e[t][0].parent=-1)}},{key:"_embiggenMatrixSize",value:function(){var t,e,i=this.m,n=this._s1.length,s=this._s2.length;for(i.length<n&&(i.length=n),t=0;n>t;++t)for(Array.isArray(i[t])?e=i[t].length:(i[t]=[],e=0),i[t].length<s&&(i[t].length=s);s>e;++e)i[t][e]={};this._initFirstRow(),this._initFirstColumn()}},{key:"_prepString",value:function(t){return t=" "+t.slice(0,this.MAX_LEN),this.caseSensitive||(t=t.toLowerCase()),t}},{key:"_matchType",value:function(t,e){return t===e?"M":"S"}},{key:"_goalCellWhole",value:function(t,e){return{i:t.length-1,j:e.length-1}}},{key:"_goalCellSubstring",value:function(t,e){var i,n={},s=e.length,r=this.m,o=t.length-1,h=0;for(n.i=o,i=1;s>i;++i)r[o][i].cost<r[o][h].cost&&(h=i);return n.j=h,n}},{key:"_goalCell",value:function(){var t=this._s1,e=this._s2;return"whole"===this.type?this._goalCellWhole(t,e):"substring"===this.type?this._goalCellSubstring(t,e):void 0}},{key:"_levenshtein",value:function(){var t,e,i,n,h,u=[],l=this._s1,a=this._s2,c=this.m,f=l.length,p=a.length;for(t=1;f>t;++t)for(e=1;p>e;++e)for(n=l[t],h=t===f-1?null:l[t+1],u[s]=c[t-1][e-1].cost+this.matchCost(l[t],a[e]),u[r]=c[t][e-1].cost+this.insertCost(a[e],n,h),u[o]=c[t-1][e].cost+this.deleteCost(l[t]),c[t][e].cost=u[s],c[t][e].parent=s,i=r;o>=i;++i)u[i]<c[t][e].cost&&(c[t][e].cost=u[i],c[t][e].parent=i)}},{key:"set",value:function(t,e){var i,n=this.type;this[t]=e,"type"===t?(i=["whole","substring"],-1===i.indexOf(e)&&(this.type="whole"),n!==this.type&&"substring"===this.type&&this._initFirstRow()):"matchCost"===t?"number"==typeof e&&(this[t]=function(t,i){return t===i?0:e}):"insertCost"===t?("number"==typeof e&&(this[t]=function(){return e}),"substring"!==this.type&&this._initFirstRow()):"deleteCost"===t&&("number"==typeof e&&(this[t]=function(){return e}),this._initFirstColumn())}},{key:"recursePath",value:function(t){function e(l,a){if(-1!==n[l][a].parent){var c,f={};return n[l][a].parent===s?(e(l-1,a-1),c=i._matchType(h[l],u[a]),f.i=l-1,f.j=a-1,f.op=c,"M"===c?f.letter=u[a]:(f.from=h[l],f.to=u[a]),void t(f)):n[l][a].parent===r?(e(l,a-1),f.i=l,f.j=a-1,f.op="I",f.letter=u[a],void t(f)):n[l][a].parent===o?(e(l-1,a),f.i=l-1,f.op="D",f.letter=h[l],void t(f)):void 0}}if("function"==typeof t){var i=this,n=this.m,h=this._s1,u=this._s2,l=this._goalCell();e(l.i,l.j)}}},{key:"reconstructPath",value:function(){var t=[];return this.recursePath(function(e){return t.push(e)}),t}},{key:"totalCost",value:function(){var t,e=this;return 0===this.s1.length?this.s2.split("").reduce(function(t,i){return t+e.insertCost(i,null,null)},0):0===this.s2.length?this.s1.split("").reduce(function(t,i){return t+e.deleteCost(i)},0):(t=this._goalCell(),this.m[t.i][t.j].cost)}},{key:"matchCost",value:function(t,e){return t===e?0:1}},{key:"insertCost",value:function(t,e,i){return 1}},{key:"deleteCost",value:function(t){return 1}},{key:"process",value:function(t,e){return this._s1=this._prepString(t),this._s2=this._prepString(e),this.s1=this._s1.slice(1),this.s2=this._s2.slice(1),this._embiggenMatrixSize(),this._levenshtein(),this}}]),t}();e.exports=h});